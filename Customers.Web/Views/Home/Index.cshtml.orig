@using Customers.Domain;
@using Customers.Data;
@using Highway.Data;

@model Customers.Web.Models.IndexModel
@{
<<<<<<< HEAD
    var connectionString = "Server=tcp:s4lin082lz.database.windows.net,1433;Database=customers_new_db;User ID=kevin@s4lin082lz;Password=Sup3erS3cureP4ssw0rd;Trusted_Connection=False;Encrypt=True;Connection Timeout=30;";
=======
    var connectionString = "Server=s4lin082lz.database.windows.net,1433;Database=HighwayDemo;Integrated Security=true";
>>>>>>> Testing for null/empty lists for web
    var mappingConfig = new MappingConfig();
    var context = new DataContext(connectionString, mappingConfig);
    var repo = new Repository(context);
    List<Customer> Customers = repo.Find(new FindAll<Customer>()).ToList();
    List<Company> Companies = repo.Find(new FindAll<Company>()).ToList();
    
    if (Customers == null || Customers == default(List<Customer>))
<<<<<<< HEAD
    {
        Customers.Add(new Customer{FirstName = "A", LastName = "B", Company = new Company("C"), Email = "a@b.com"});
    }
    
    if (Companies == null || Companies == default(List<Company>))
    {
        Companies.Add(new Company("C"));
    }
=======
        Customers.Add(new Customer{FirstName = "A", LastName = "B", Company = new Company("C"), Email = "a@b.com"});
    
    if (Companies == null || Companies == default(List<Company>))
        Companies.Add(new Company("C"));
>>>>>>> Testing for null/empty lists for web
    //List<Customer> Customers = Model.Customers;
    ViewBag.Title = "Customers";
}
<div class="row">
    <div class="large-12 columns">
        <h1>List of Customers</h1>
    </div>
</div>

<div>
    <table width="100%">
        <thead>
            <tr>
                <td>
                    First Name
                </td>
                <td>
                    Last Name
                </td>
                <td>
                    Company Name
                </td>
                <td></td>
                <td></td>
                <td align="center">
                    <a href="#" class="small button">Create New</a>
                </td>
            </tr>
        </thead>
        <tbody>
            @foreach (var customer in Customers)
            {
            <tr>
                <td>
                    @customer.FirstName
                </td>
                <td>
                    @customer.LastName
                </td>
                <td>
                    @customer.Company.Name
                </td>
                <td align="center">
                    <a href="#">View</a>
                </td>
                <td align="center">
                    <a href="#">Edit</a>
                </td>
                <td align="center">
                    <a href="#">Delete</a>
                </td>
            </tr>
            }
        </tbody>

    </table>
</div>