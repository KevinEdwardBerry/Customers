@using Customers.Web.Models;

@model CustomerModel
@{
    CustomerModel aCustomerModel = new CustomerModel(new Repo());
    aCustomerModel.Repository.GetAllCompanies();
    aCustomerModel.Repository.GetAllCustomers();
    ViewBag.Title = "Customers";
}
<div class="row">
    <div class="large-12 columns">
        <h1>List of Customers</h1>
    </div>
</div>

<div>
    <table width="100%">
        <thead>
            <tr>
                <td align="left">
                    First Name
                </td>
                <td align="left">
                    Last Name
                </td>
                <td align="center">
                    Company Name
                </td>
                <td align="center">
                    Email Address
                </td>
                <td align="center">
                    Phone Number
                </td>
                <td align="center">
                    Billing Address
                </td>
                <td></td>
                <td align="center">
                    @Html.ActionLink("Add Customer", "AddCustomer", null, new { @class = "small button" })
                </td>
            </tr>
        </thead>
        <tbody>
            @foreach (var customer in aCustomerModel.Customers)
            {
            <tr>
                <td align="left">
                    @customer.FirstName
                </td>
                <td align="left">
                    @customer.LastName
                </td>
                <td align="center">
                    @customer.Company.Name
                </td>
                <td align="center">
                    @customer.Email
                </td>
                <td align="center">
                    @customer.Phone
                </td>
                <td align="center">
                    @if (customer.BillingAddress == null)
                    {
                        customer.BillingAddress = new Customers.Domain.CustomerBillingAddress();
                    }
                    <div>@customer.BillingAddress.Street1</div>
                    <div>@customer.BillingAddress.Street2</div>
                    <div>@customer.BillingAddress.City, @customer.BillingAddress.State @customer.BillingAddress.ZipCode</div>
                </td>

                <td align="center">
                    <a href="#">Edit</a>
                </td>
                <td align="center">
                    <a href="#">Delete</a>
                </td>
            </tr>
            }
        </tbody>

    </table>
</div>